<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Album ·∫£nh xoay 3D</title>
<style>
body {
  margin: 0;
  height: 100vh;
  background: #0d0d0d; /* n·ªÅn t·ªëi ƒë·ªÉ ph√°o hoa n·ªïi b·∫≠t */
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  overflow: hidden;
}

.scene {
  width: 300px;
  height: 300px;
  perspective: 1000px;
}

.cube {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  /* g√≥c m·∫∑c ƒë·ªãnh ƒë·ªÉ th·∫•y 3D */
  transform: rotateX(-20deg) rotateY(20deg);
  transition: transform 1s;
  box-shadow: 0 0 40px rgba(255,255,255,0.6);
  animation: glow 5s infinite alternate;
}

@keyframes glow {
  from { box-shadow: 0 0 20px rgba(255,255,255,0.3); }
  to   { box-shadow: 0 0 60px rgba(255,255,255,0.8); }
}

.face {
  position: absolute;
  width: 300px;
  height: 300px;
  background: #fff;
  border: 2px solid #ccc;
  display: flex;
  justify-content: center;
  align-items: center;
}

.face img {
  max-width: 100%;
  max-height: 100%;
  border-radius: 8px;
}

/* C√°c m·∫∑t c·ªßa kh·ªëi l·∫≠p ph∆∞∆°ng */
.front  { transform: rotateY(0deg) translateZ(150px); }
.back   { transform: rotateY(180deg) translateZ(150px); }
.right  { transform: rotateY(90deg) translateZ(150px); }
.left   { transform: rotateY(-90deg) translateZ(150px); }
.top    { transform: rotateX(90deg) translateZ(150px); }
.bottom { transform: rotateX(-90deg) translateZ(150px); }

/* hi·ªáu ·ª©ng morph th√†nh sphere */
.cube.sphere {
  border-radius: 50%;
  transform: scale(1.2);
  transition: all 2s ease-in-out;
}

/* canvas ph√°o hoa */
#fireworks {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none; /* kh√¥ng ch·∫∑n click */
}
</style>
</head>
<body>

<canvas id="fireworks"></canvas>

<div class="scene">
  <div class="cube" id="cube">
    <div class="face front"><img src="https://picsum.photos/id/1015/300/300" alt="·∫¢nh 1"></div>
    <div class="face back"><img src="https://picsum.photos/id/1025/300/300" alt="·∫¢nh 2"></div>
    <div class="face right"><img src="https://picsum.photos/id/1035/300/300" alt="·∫¢nh 3"></div>
    <div class="face left"><img src="https://picsum.photos/id/1045/300/300" alt="·∫¢nh 4"></div>
    <div class="face top"><img src="https://picsum.photos/id/1055/300/300" alt="·∫¢nh 5"></div>
    <div class="face bottom"><img src="https://picsum.photos/id/1065/300/300" alt="·∫¢nh 6"></div>
  </div>
</div>

<script>
let angleX = -20;
let angleY = 20;
let clickCount = 0;
const cube = document.getElementById("cube");

// canvas ph√°o hoa
const canvas = document.getElementById("fireworks");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let particles = [];

function createFirework(x, y) {
  const colors = ["#ff4d4d","#ffd633","#66ff66","#66ccff","#cc66ff"];
  for (let i = 0; i < 40; i++) {
    particles.push({
      x: x,
      y: y,
      angle: Math.random() * 2 * Math.PI,
      speed: Math.random() * 4 + 2,
      radius: Math.random() * 3 + 2,
      color: colors[Math.floor(Math.random()*colors.length)],
      life: 60
    });
  }
}

function animateFireworks() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach((p,i) => {
    p.x += Math.cos(p.angle) * p.speed;
    p.y += Math.sin(p.angle) * p.speed;
    p.life--;
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.radius,0,2*Math.PI);
    ctx.fillStyle = p.color;
    ctx.fill();
    if (p.life <= 0) particles.splice(i,1);
  });
  requestAnimationFrame(animateFireworks);
}
animateFireworks();

document.body.addEventListener("click", (e) => {
  const w = window.innerWidth;
  const h = window.innerHeight;
  const x = e.clientX;
  const y = e.clientY;

  // x√°c ƒë·ªãnh click ·ªü v√πng n√†o
  if (x < w/3) {
    angleY -= 90; // xoay tr√°i
  } else if (x > 2*w/3) {
    angleY += 90; // xoay ph·∫£i
  } else if (y < h/3) {
    angleX += 90; // xoay l√™n
  } else if (y > 2*h/3) {
    angleX -= 90; // xoay xu·ªëng
  } else {
    angleY += 90; // m·∫∑c ƒë·ªãnh xoay ph·∫£i n·∫øu click gi·ªØa
  }

  cube.style.transform = `rotateX(${angleX}deg) rotateY(${angleY}deg)`;

  // üéÜ ph√°o hoa t·∫°i v·ªã tr√≠ click
  createFirework(x,y);

  // sau v√†i l·∫ßn click ‚Üí morph th√†nh sphere
  clickCount++;
  if (clickCount === 6) {
    cube.classList.add("sphere");
  }
});
</script>

</body>
</html>